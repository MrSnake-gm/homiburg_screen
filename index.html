<html>
<head>
<script>
    let photos = [
        "imgs/1.png",
        "imgs/2.png",
        "imgs/3.png",
        "imgs/4.png",
        "imgs/5.png",
        "imgs/6.png",
        "imgs/7.png",
        "imgs/8.png",
        "imgs/9.png",
        "imgs/10.png",
        "imgs/11.png",
        "imgs/12.png",
    ]
    
    // Random text phrases - you can customize this list
    let randomTexts = [
        "Добро пожаловать на HOMIBURG.COM",
        "А вы знали то что пинать можно, забиндив это - bind b hg_kick",
        "Если раунд затягивается, попросите администрацию провести голосование за скип",
        "С помощью привелегии MEGASPONSOR вы разблокируете +15 донатный скинов из гардероба",
        "Заводите друзей, и рекомендуйте наш проект другим друзьям",
        "Стань лидером по наигранным часам на сервере HOMIBURG!",
        "Почему HOMIBURG? Да потому-что создатель любит бургеры",
        "Вы знали, то что сервер был основан и открыт - 06.02.2026 году!",
        "Будь чилловым парнем)",
        "Постоянно обновляем и улучшаем игру"
    ]
</script>

<meta charset="UTF-8">

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/main_1.css">
    <link rel="icon" href="images/fav.ico">

    <style>
        
        .logo-container {
            text-align: center;
            margin-bottom: 10px;
        }

        
        .server-logo {
            display: block;
            margin: 0 auto 15px auto;
            max-width: 270px; 
            width: 15vw; 
            min-width: 120px; 
            height: auto;
            opacity: 0.9;
            transition: opacity 0.3s ease, transform 0.3s ease;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
        }


        .server-logo:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        
        .server-title {
            font-size: 3em;
            font-weight: bold;
            margin: 0;
            text-align: center;
            letter-spacing: 2px;
        }

        body, .server-title, #servername, #mapname, #textstatus, .log {
            font-family: 'Times New Roman', Times, serif !important;
        }

        /* Random text container styles */
        .random-text-container {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            text-align: center;
            z-index: 10;
        }

        .random-text {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            opacity: 0;
            transition: opacity 1s ease-in-out;
            position: absolute;
            width: 100%;
            left: 0;
        }

        .random-text.active {
            opacity: 1;
        }

        /* Image container styles */
        .image-container {
            position: absolute;
            left: 150px;
            top: 40%;
            transform: translateY(-50%);
            z-index: 10;
        }

        .side-image {
            width: 350px;
            height: auto;
            border-radius: 8px;
            opacity: 0.9;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .side-image:hover {
            opacity: 1;
            transform: scale(1.05);
        }
    </style>

    <title>HOMIBURG SCREEN</title>
</head>

<body>

    <audio id="backgroundMusic" loop>
        <source src="music/loadingv2.mp3" type="audio/mpeg">

    </audio>

    <div class="background1" id="1" style="
    position: absolute;
    
    background-position: center center;
    background-repeat: no-repeat;
    width: 100vw;
    height: 100vh;
    background-size: cover;
    z-index: -1;
    "></div>

    <div class="background2" id="2" style="
    position: absolute;

    background-position: center center;
    background-repeat: no-repeat;
    width: 100vw;
    height: 100vh;
    background-size: cover;
    z-index: -1;
    "></div>

    <div id="load" style="
    width: 512px;
    height: 512px;
    position: absolute;
    background-repeat: no-repeat;
    background-size: cover;
    z-index: -1;
    opacity: 0;
    "></div>

    <!-- Random text container -->
    <div class="random-text-container">
        <div id="randomText" class="random-text active"></div>
    </div>

    <!-- Side image container -->
    <div class="image-container">
        <img src="logos/qr-code.png" alt="Logo" class="side-image" id="sideImage">
    </div>

    <div style="
        height: 50%;
        display: flex;
        flex-direction: column;
    ">
        <div style="width: 100%; flex: 1;"></div>
        <div style="
            width: 100%;
            height: auto;
        ">
            <div class="logo-container">
                <h1 id="servername" class="server-title">HOMIBURG.COM</h1>
            </div>

            <p id="mapname" style="
            text-align: center;
            font-size: 3em;
            ">https://discord.gg/pCgv98cy8q</p>
        </div>
    </div>

    <div id="bottom" style="
    height: 50%;
    ">
        <p id="textstatus" style="
        position: relative;
        text-align: center;
        top: 0.575em;
        font-size: 20;
        ">Loading...</p>

        <div id="history" style="
            width: 100%;
            height: 0px;
            position: relative;
            top: 1.5em;
        "></div>
    </div>

<script>

    const backgroundMusic = document.getElementById('backgroundMusic');
    

    backgroundMusic.addEventListener('loadedmetadata', function() {
        backgroundMusic.volume = 0.05;
    });
    

    backgroundMusic.addEventListener('play', function() {
        backgroundMusic.volume = 0.05; 
    });

    window.addEventListener('load', function() {

        backgroundMusic.volume = 0.05; 
        backgroundMusic.play().catch(error => {
            console.log("");
        });
    });
    
    document.addEventListener('click', function() {
        if (backgroundMusic.paused) {
            backgroundMusic.volume = 0.05; 
            backgroundMusic.play();
        }
    }, { once: true });

    
    let background1 = document.getElementById("1")
    let background2 = document.getElementById("2")
    let load = document.getElementById("load")
    
    background2.style.opacity = 0
    
    let mode = 0

    let animOptions = {
        duration: 3000, 
        fill: 'forwards'
    }

    function slide() {
        if (mode == 0) {
            mode = 1

            background2.style.backgroundImage = load.style.backgroundImage

            background1.animate([
                {opacity: 1},{opacity: 0}
            ],animOptions)

            background2.animate([
                {opacity: 0},{opacity: 1}
            ],animOptions)
        } else {
            mode = 0

            background1.style.backgroundImage = load.style.backgroundImage

            background1.animate([
                {opacity: 0},{opacity: 1}
            ],animOptions)

            background2.animate([
                {opacity: 1},{opacity: 0}
            ],animOptions)
        }

        const randomIndex = Math.floor(Math.random() * photos.length)
        load.style.backgroundImage = 'url("' + photos[randomIndex] + '")'
    }

    slide()
    slide()

    setInterval(slide,5000) 

    // Random text rotation functionality
    let usedTexts = []
    let currentTextIndex = -1

    function getRandomText() {
        if (usedTexts.length === 0) {
            usedTexts = [...randomTexts]
        }

        let randomIndex
        do {
            randomIndex = Math.floor(Math.random() * usedTexts.length)
        } while (randomTexts.indexOf(usedTexts[randomIndex]) === currentTextIndex && usedTexts.length > 1)

        const text = usedTexts[randomIndex]
        usedTexts.splice(randomIndex, 1)
        currentTextIndex = randomTexts.indexOf(text)
        return text
    }

    function rotateText() {
        const textElement = document.getElementById('randomText')
        
        // Fade out current text
        textElement.classList.remove('active')
        
        // Wait for fade out animation to complete before changing text
        setTimeout(() => {
            textElement.textContent = getRandomText()
            textElement.classList.add('active')
        }, 1000)
    }

    // Initialize with first text
    document.getElementById('randomText').textContent = getRandomText()

    // Rotate text every 15 seconds
    setInterval(rotateText, 15000)

    let fileNeeded = 0
    let fileTotal = 0

    SetFilesTotal = function(total) {fileTotal = total}
    SetFilesNeeded = function(needed) {fileNeeded = needed}

    window.GameDetails = function(servername,serverurl,mapname,maxplayers,steamid,gamemode,volume,language) {
        document.getElementById("servername").innerHTML = servername
        document.getElementById("mapname").innerHTML = mapname
    }

    let loadbar = document.getElementById("loadbar")
    let textstatus = document.getElementById("textstatus")

    function updateProgress() {
        /*var progress = (fileTotal > 0) ?
            (Math.max(0,fileTotal - fileNeeded) / fileTotal) : 1

            document.getElementById("dev").innerHTML = fileTotal + "|" + fileNeeded

            loadbar.style.right = progress * 100 + "%"*/
    }

    window.DownloadingFile = function(filePath) {
        fileNeeded = Math.max(0,fileNeeded - 1)
        
        textstatus.innerHTML = "Downloading " + filePath
        
        updateProgress()
    }

    window.SetStatusChanged = function(status) {
        if (status == 'Sending Client info...') {
            filesNeeded = 0
            updateProgress()
        }

        addHistory(textstatus.innerHTML)
        textstatus.innerHTML = status
    }

    updateProgress()

    let anchor = document.getElementById("history")
    let history = []

    function addHistory(msg) {
        let text = document.createElement("p")
        text.classList.add("log")
        text.innerHTML = msg

        anchor.insertBefore(text,anchor.childNodes[0])

        history.push(text)

        let max = (document.getElementById("bottom").clientHeight - 100) / text.clientHeight
       
        for (let i = 0;i < history.length; i++) {
            let text = history[i]

            let opacity = 1 - (history.length - i - 1) / max
            text.style.opacity = opacity
            //text.innerHTML = opacity

            if (i > max) {
                anchor.removeChild(history[0])
                history.splice(0,1)
            }
        }
    }
</script>
</body>
</html>
